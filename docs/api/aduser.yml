configuration:
  title: AdUser
  description: Api documentation for AdUser
  uri: https://aduser.example.com:8000
versions:
  v0.1:
    status: current
    major: 0
    minor: 1
    methods:
      info:
        label: info
        method: GET
        uri: /info
        description: Return API info.
        response_body:
          type: object
      getPixelPath:
        label: getPixelPath
        method: GET
        uri: /getPixelPath
        description: Return API info.
        response_body:
          type: string
          sample: "https://aduser.example.com:8000/34hwjkg4324_{server_id}_{user_id}.gif"
      pixel:
        label: pixel
        method: GET
        uri: /34hwjkg4324_{server_id}_{user_id}.gif
        description: Return pixel
        response_codes:
          - code: 302
            message: Redirect to another pixel provider
        request_parameters:
          server_id:
            type: string
            description: AdServer identifier
            optional: false
            sample: 1dsahj32
          user_id:
            type: string
            description: User identifier
            optional: false
            sample: 3724gol5
      getData:
        label: getData
        method: GET
        uri: /getData
        description: Get user data.
        request_parameters:
          uid:
            type: string
          domain:
            type: string
          ua:
            type: string
        response_body:
          type: reference
          reference: UserDataResponse
        response_codes:
          - code: 400
            message: Invalid request (fields missing, etc.)
      getSchema:
        label: getSchema
        method: GET
        uri: /getSchema
        description: Return API info.
        response_body:
          type: reference
          reference: schema
    references:
      schema_keyword:
        type: object
        properties:
          label:
            type: string
          type:
            type: enum
            values:
              - input
              - num
              - bool
              - dict
          values:
            description: Only used for dict type.
            type: object
            optional: true
      schema_meta:
        type: object
        properties:
          ver:
            type: string
          name:
            type: string
      schema:
        type: object
        properties:
          meta:
            type: reference
            reference: schema_meta
          values:
            type: object
            additionalProperties:
              type: reference
              reference: schema_keyword
      UserDataRequest:
        type: object
        properties:
          user:
            type: object
            properties:
              uid:
                type: string
          site:
            type: object
            properties:
              domain:
                type: string
          device:
            type: object
            properties:
              ua:
                type: string
      UserDataResponse:
        type: object
        properties:
          uid:
            type: string
          human_score:
            type: human_score
          keywords:
            type: keyword

    types:
      human_score:
        item:
          type: number
          sample: 0.0
        format:
          pretty: 0.0-0.1
      keyword:
        item:
          type: object
          properties:
            key:
              type: string
            value:
              type: string
